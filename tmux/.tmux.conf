# Chage the prefix
unbind-key C-b
set -g prefix 'C-g'

set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Quicker entry of copy-mode
bind C-g copy-mode

# Vim like Pane Switching
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# use vi keys in selection mode
setw -g mode-keys vi

# `v` starts select
bind -T copy-mode-vi v send -X begin-selection
# `y` copies
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# Make `gh` move to beginning of the line and `gl` to the end
# Create a custom 'g' prefix table in copy mode
bind-key -T copy-mode-vi g switch-client -T copy-mode-vi-g
# Bind h and l in the custom table
bind-key -T copy-mode-vi-g h send-keys -X start-of-line
bind-key -T copy-mode-vi-g l send-keys -X end-of-line

# Copy to the system clipboard
set -g set-clipboard on

# Smoother track pad scrolling
set -g @scroll-speed-num-lines-per-scroll 1

# Open new window/pane with current working directory
bind c new-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"

# get rid of escape delay
set -sg escape-time 0

set -g status-bg black
set -g status-fg white

set -g display-panes-time 4000

# Open URLs
# bind u run-shell 'tmux capture-pane -J -p -t "#{pane_id}" > /tmp/tmux-urls && tmux new-window "urlscan /tmp/tmux-urls"'
bind u new-window 'tmux capture-pane -t {last} -J -p -S - | grep -oE "https?://[^[:space:]\"<>)]*" | sort -u | fzf | xargs open'

set -g renumber-windows on

# Allow applications inside tmux to send OSC52 codes
set -g allow-passthrough on
